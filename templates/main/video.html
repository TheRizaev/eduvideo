{% extends 'main/base.html' %}
{% load static %}

{% block title %}{{ video.title }} - –≠–¥—É–í–∏–¥–µ–æ{% endblock %}

{% block content %}
<div class="video-page-layout">
    <div class="video-content">
        <div class="video-player-container">
            <div class="video-player">
                <!-- –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–ª–µ–µ—Ä –≤–∏–¥–µ–æ -->
                <div style="background-color: #000; width: 100%; height: 500px; display: flex; justify-content: center; align-items: center;">
                    <div style="color: white; font-size: 20px;">–í–∏–¥–µ–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å –¥–ª—è {{ video.title }}</div>
                </div>
            </div>
            
            <div class="video-details">
                <h1>{{ video.title }}</h1>
                <div class="video-info-bar">
                    <div class="views-info">{{ video.views }} ‚Ä¢ {{ video.age }}</div>
                    <div class="actions-bar">
                        <button class="action-button">üëç –ù—Ä–∞–≤–∏—Ç—Å—è</button>
                        <button class="action-button">üëé –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è</button>
                        <button class="action-button">‚ÜóÔ∏è –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                        <button class="action-button">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </div>
                
                <div class="channel-info">
                    <div class="channel-avatar">{{ video.channel|first }}</div>
                    <div class="channel-details">
                        <div class="channel-name">{{ video.channel }}</div>
                        <div class="subscribers">10K –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
                    </div>
                    <button class="subscribe-button">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
                </div>
                
                <div class="video-description">
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ. –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏ –≤–∏–¥–µ–æ.</p>
                </div>
            </div>
            
            <div class="comments-section">
                <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
                <div class="comment-form">
                    <div class="user-avatar">–£</div>
                    <input type="text" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...">
                </div>
                
                <div class="comments-list">
                    <div class="comment">
                        <div class="comment-avatar">–ö</div>
                        <div class="comment-content">
                            <div class="comment-author">–ö–æ–º–º–µ–Ω—Ç–∞—Ç–æ—Ä</div>
                            <div class="comment-text">–û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–µ –≤–∏–¥–µ–æ! –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ.</div>
                            <div class="comment-actions">
                                <button class="comment-like">üëç 24</button>
                                <button class="comment-dislike">üëé</button>
                                <button class="comment-reply">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="related-videos">
        <h3>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∏–¥–µ–æ</h3>
        <div class="related-videos-list" id="related-videos-container">
            <!-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∏–¥–µ–æ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π ID –≤–∏–¥–µ–æ –∏–∑ URL
        const currentPath = window.location.pathname;
        const currentVideoId = parseInt(currentPath.split('/').filter(Boolean)[1]);
        
        // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –≤–∏–¥–µ–æ
        const relatedVideosContainer = document.getElementById('related-videos-container');
        
        // –°–æ–∑–¥–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–∏–¥–µ–æ, –∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–µ–µ
        if (relatedVideosContainer && window.videoData) {
            // –§–∏–ª—å—Ç—Ä—É–µ–º –≤–∏–¥–µ–æ, –∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–µ–µ
            const relatedVideos = window.videoData.filter(video => video.id !== currentVideoId);
            
            // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 5 –≤–∏–¥–µ–æ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            const recommendedVideos = relatedVideos.slice(0, 5);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥–æ–µ –≤–∏–¥–µ–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            recommendedVideos.forEach(video => {
                const videoElement = document.createElement('div');
                videoElement.className = 'related-video-card';
                videoElement.onclick = function() {
                    window.location.href = `/video/${video.id}/`;
                };
                
                videoElement.innerHTML = `
                    <div class="related-thumbnail">
                        <img src="/static/preview_${video.id}.jpg" onerror="this.src='/static/placeholder.jpg'" alt="${video.title}">
                        <div class="duration">${video.duration}</div>
                    </div>
                    <div class="related-info">
                        <div class="related-title">${video.title}</div>
                        <div class="related-channel">${video.channel}</div>
                        <div class="related-stats">${video.views} ‚Ä¢ ${video.age}</div>
                    </div>
                `;
                
                relatedVideosContainer.appendChild(videoElement);
            });
        }
    });
</script>
{% endblock %}